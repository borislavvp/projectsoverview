<template>
  <div
    class="flex-auto h-full flex flex-col items-center"
    :class="[
      documentIsSelected
        ? 'overflow-hidden'
        : 'overflow-y-auto overflow-x-hidden',
    ]"
  >
    <div class="mt-10" v-if="showLoadingIndication">
      <span>
        <svg
          class="w-20 h-20 animate-spin text-gray-800 fill-current"
          viewBox="0 0 16 16"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M8 1.5C7.80295 1.50007 7.60785 1.53894 7.42582 1.61441C7.2438 1.68988 7.07842 1.80046 6.93913 1.93984C6.79984 2.07922 6.68937 2.24467 6.61403 2.42675C6.53868 2.60882 6.49993 2.80395 6.5 3.001C6.50007 3.19805 6.53894 3.39315 6.61441 3.57518C6.68988 3.7572 6.80046 3.92258 6.93984 4.06187C7.07922 4.20116 7.24467 4.31163 7.42675 4.38697C7.60882 4.46232 7.80395 4.50107 8.001 4.501C8.39896 4.50087 8.78056 4.34265 9.06187 4.06116C9.34317 3.77967 9.50113 3.39796 9.501 3C9.50087 2.60204 9.34265 2.22044 9.06116 1.93913C8.77967 1.65783 8.39796 1.49987 8 1.5ZM4.4685 3.219C4.13706 3.21927 3.81927 3.35105 3.58491 3.58541C3.35055 3.81977 3.21876 4.13756 3.2185 4.469C3.2185 5.158 3.7795 5.719 4.4685 5.719C5.1585 5.719 5.7185 5.158 5.7185 4.469C5.7185 3.779 5.1585 3.219 4.4685 3.219ZM11.5315 3.969C11.256 3.969 11.0315 4.1935 11.0315 4.469C11.0315 4.744 11.256 4.969 11.5315 4.969C11.8065 4.969 12.0315 4.744 12.0315 4.469C12.0315 4.1935 11.8065 3.969 11.5315 3.969ZM3 6.875C2.85223 6.87503 2.70591 6.90417 2.5694 6.96075C2.4329 7.01733 2.30887 7.10024 2.2044 7.20475C2.09994 7.30927 2.01708 7.43333 1.96056 7.56987C1.90404 7.7064 1.87497 7.85273 1.875 8.0005C1.87503 8.14827 1.90417 8.29459 1.96075 8.4311C2.01733 8.5676 2.10024 8.69163 2.20475 8.7961C2.30927 8.90056 2.43333 8.98342 2.56987 9.03994C2.7064 9.09646 2.85273 9.12553 3.0005 9.1255C3.29893 9.12543 3.58512 9.00682 3.7961 8.79574C4.00708 8.58467 4.12557 8.29843 4.1255 8C4.12543 7.70157 4.00682 7.41538 3.79575 7.2044C3.58467 6.99342 3.29843 6.87493 3 6.875ZM13 7.375C12.6545 7.375 12.375 7.6545 12.375 8C12.375 8.3455 12.6545 8.625 13 8.625C13.3455 8.625 13.625 8.3455 13.625 8C13.625 7.6545 13.3455 7.375 13 7.375ZM4.4685 10.5315C3.916 10.5315 3.4685 10.9785 3.4685 11.5315C3.4685 11.7967 3.57386 12.0511 3.76139 12.2386C3.94893 12.4261 4.20328 12.5315 4.4685 12.5315C4.73372 12.5315 4.98807 12.4261 5.17561 12.2386C5.36314 12.0511 5.4685 11.7967 5.4685 11.5315C5.4685 10.9785 5.0215 10.5315 4.4685 10.5315ZM11.5315 10.7815C11.433 10.7815 11.3355 10.8009 11.2445 10.8386C11.1535 10.8763 11.0708 10.9315 11.0012 11.0012C10.9315 11.0708 10.8763 11.1535 10.8386 11.2445C10.8009 11.3355 10.7815 11.433 10.7815 11.5315C10.7815 11.63 10.8009 11.7275 10.8386 11.8185C10.8763 11.9095 10.9315 11.9922 11.0012 12.0618C11.0708 12.1315 11.1535 12.1867 11.2445 12.2244C11.3355 12.2621 11.433 12.2815 11.5315 12.2815C11.7304 12.2815 11.9212 12.2025 12.0618 12.0618C12.2025 11.9212 12.2815 11.7304 12.2815 11.5315C12.2815 11.3326 12.2025 11.1418 12.0618 11.0012C11.9212 10.8605 11.7304 10.7815 11.5315 10.7815ZM8 12.125C7.5175 12.125 7.125 12.5175 7.125 13C7.125 13.4825 7.5175 13.875 8 13.875C8.4825 13.875 8.875 13.4825 8.875 13C8.875 12.5175 8.4825 12.125 8 12.125Z"
          />
        </svg>
      </span>
    </div>
    <div class="w-full h-full flex justify-center flex-wrap">
      <document-item
        v-for="(doc, i) in documents"
        :key="doc.name"
        :documentItem="doc"
        :documentItemId="i"
      ></document-item>
    </div>
  </div>
</template>

<script lang="ts">
import DocumentItem from "./DocumentItem.vue";
import { computed, defineComponent } from "@vue/composition-api";
import { usePdfManager } from "../providers/provider";

export default defineComponent({
  components: {
    DocumentItem,
  },
  setup() {
    const pdfManager = usePdfManager();

    const showLoadingIndication = computed(
      () => pdfManager.fetching && pdfManager.documents.value.length === 0
    );

    return {
      documents: pdfManager.documents,
      documentIsSelected: pdfManager.isDocumentSelected,
      showLoadingIndication,
    };
  },
});
</script>

<style>
.list-complete-item {
  transition: all 1s;
}
.list-complete-enter {
  opacity: 0;
  transform: translateY(30px);
}
</style>
